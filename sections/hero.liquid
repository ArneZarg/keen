{{ 'section-hero.css' | asset_url | stylesheet_tag }}
<script src="{{ 'hero.js' | asset_url }}" defer="defer"></script>

{% liquid
  assign images_fetch_priority = 'auto'
  assign images_loading = 'lazy'

  if section.index == 1
    assign images_fetch_priority = 'high'
    assign images_loading = 'eager'
  endif

  assign is_header_overlay = false

  if section.index == 1 or section.index == null
    if section.settings.header_overlay == true
      assign is_header_overlay = true
    endif
  endif
%}

{% style %}
  @media screen and (max-width: 989px) {
    #hero-{{ section.id }} .hero-content {
      {%- if section.index == 1 or section.index == null -%}
        {%- if is_header_overlay -%}
          min-height: calc(100vh - var(--announcement-height));
          min-height: calc((var(--vh, 1vh) * 100) - var(--announcement-height));
          min-height: calc(100svh - var(--announcement-height));
        {%- else -%}
          min-height: calc(100vh - var(--announcement-height) - var(--header-height));
          min-height: calc((var(--vh, 1vh) * 100) - var(--announcement-height) - var(--header-height));
          min-height: calc(100svh - var(--announcement-height) - var(--header-height));
        {%- endif -%}
      {%- else -%}
        min-height: 100vh;
        min-height: calc((var(--vh, 1vh) * 100));
        min-height: 100svh;
      {%- endif -%}
    }
  }

  @media screen and (min-width: 990px) {
    #hero-{{ section.id }} .hero-content {
      {%- if section.index == 1 or section.index == null -%}
        {%- if is_header_overlay -%}
          min-height: calc(100vh - var(--announcement-height));
          min-height: calc((var(--vh, 1vh) * 100) - var(--announcement-height));
          min-height: calc(100svh - var(--announcement-height));
        {%- else -%}
          min-height: calc(100vh - var(--announcement-height) - var(--header-height));
          min-height: calc((var(--vh, 1vh) * 100) - var(--announcement-height) - var(--header-height));
          min-height: calc(100svh - var(--announcement-height) - var(--header-height));
        {%- endif -%}
      {%- else -%}
        min-height: 100vh;
        min-height: calc((var(--vh, 1vh) * 100));
        min-height: 100svh;
      {%- endif -%}
    }
  }
{% endstyle %}

{% style %}
  {% render 'section-margin' %}
{% endstyle %}

<div
  class="hero hero-{{ section.id }} color-{{ section.settings.color_scheme }} background{% if section.settings.animate %} animate{% endif %}{% if section.settings.secondary_image != blank %} hero-has-secondary-image{% endif %}{% if section.index == 1 or section.index == null %} hero--first-section{% endif %}"
  style="--secondary-image-border-radius: {{ section.settings.secondary_image_border_radius }}px"
  id="hero-{{ section.id }}"
  {% if is_header_overlay %}
    data-header-overlay="true"
    data-color-scheme="{{ section.settings.color_scheme }}"
  {% endif %}
>
  {% if section.settings.background_image %}
    <div class="hero-bg-image-wrapper">
      {{
        section.settings.background_image
        | image_url: width: section.settings.background_image.width
        | image_tag:
          width: section.settings.background_image.width,
          height: section.settings.background_image.height,
          widths: '360, 535, 600, 720, 940, 1066, 1200, 1400, 1600, 1800, 2000, 2200, 2400, 2600, 2800, 3000, 3200, 3400, 3600, 3800',
          sizes: '100vw',
          class: 'hero-bg-image',
          fetchpriority: images_fetch_priority,
          loading: images_loading
      }}
      {%- if section.settings.overlay_opacity > 0 -%}
        {%- if section.settings.overlay_as_gradient -%}
          {%- capture overlay_styles -%}
              background: linear-gradient(
                to bottom,
                rgba(var(--color-overlay), {{ section.settings.overlay_opacity | divided_by: 100.0 | times: 0.3 }}),
                rgba(var(--color-overlay), {{ section.settings.overlay_opacity | divided_by: 100.0 }})
              );
            {%- endcapture -%}
        {%- else -%}
          {%- capture overlay_styles -%}
              background: rgba(var(--color-overlay));
              opacity: {{ section.settings.overlay_opacity | divided_by: 100.0 }};
            {%- endcapture -%}
        {%- endif -%}
        <div
          class="hero-bg-image-overlay"
          style="{{ overlay_styles }}"
        ></div>
      {%- endif -%}
    </div>
  {% endif %}
  <div class="hero-main">
    {% if section.settings.section_heading != blank
      or section.settings.description != blank
      or section.settings.show_button
    %}
      <div class="hero-content-wrapper">
        <div class="container">
          <div class="hero-content">
            {%- if section.settings.section_heading != blank -%}
              <h2 class="hero-heading {{ section.settings.section_heading_size }}">
                {{- section.settings.section_heading -}}
              </h2>
            {%- endif -%}
            {% if section.settings.animate != true %}
              {%- if section.settings.section_heading_2 != blank or section.settings.show_button -%}
                <div class="hero-content-bottom">
                  <p class="hero-secondary-heading {{ section.settings.section_heading_size_2 }}">
                    {{- section.settings.section_heading_2 -}}
                  </p>
                  {%- if section.settings.show_button -%}
                    {% render 'button', layout: section, class: 'hero-button' %}
                  {%- endif -%}
                </div>
              {%- endif -%}
            {% endif %}
          </div>
        </div>
      </div>
    {% endif %}
  </div>
  {% if section.settings.secondary_image %}
    <div
      class="hero-sticky-wrapper"
    >
      <div class="hero-sticky">
        <div
          class="hero-sticky-image-container{% if section.settings.secondary_image_overlay_opacity > 0 %} hero-sticky-image-container--with-overlay{% endif %}"
          style="{% if section.settings.secondary_image_overlay_opacity > 0 %}--secondary-overlay-opacity: {{ section.settings.secondary_image_overlay_opacity}}%{% endif %}"
        >
          {{
            section.settings.secondary_image
            | image_url: width: section.settings.secondary_image.width
            | image_tag:
              width: section.settings.secondary_image.width,
              height: section.settings.secondary_image.height,
              widths: '360, 535, 600, 720, 940, 1066, 1200, 1400, 1600, 1800, 2000, 2200, 2400, 2600, 2800, 3000, 3200, 3400, 3600, 3800',
              sizes: '100vw',
              class: 'hero-sticky-image',
              fetchpriority: images_fetch_priority,
              loading: images_loading
          }}
          {%- if section.settings.section_heading_2 != blank or section.settings.show_button -%}
            <div class="hero-secondary-heading-container">
              <div class="container">
                <div class="hero-secondary-heading-wrapper">
                  {%- if section.settings.section_heading_2 != blank -%}
                    <p class="hero-secondary-heading {{ section.settings.section_heading_size_2 }}">
                      {{- section.settings.section_heading_2 -}}
                    </p>
                  {%- endif -%}
                  {%- if section.settings.show_button -%}
                    {% render 'button', layout: section, class: 'hero-button' %}
                  {%- endif -%}
                </div>
              </div>
            </div>
          {%- endif -%}
        </div>
      </div>
    </div>
  {% endif %}
</div>

{% schema %}
{
  "name": "t:sections.hero.name",
  "tag": "section",
  "class": "hero-section spaced-section",
  "enabled_on": {
    "templates": ["*"]
  },
  "settings": [
    {
      "type": "checkbox",
      "id": "header_overlay",
      "default": false,
      "label": "t:sections.all.header_overlay.label",
      "info": "t:sections.hero.settings.header_overlay.info"
    },
    {
      "type": "color_scheme",
      "id": "color_scheme",
      "default": "background-3",
      "label": "t:sections.all.color_scheme.label"
    },
    {
      "type": "checkbox",
      "id": "animate",
      "label": "t:sections.all.animate.label",
      "default": true
    },
    {
      "type": "header",
      "content": "t:sections.hero.settings.header__media.content"
    },
    {
      "type": "image_picker",
      "id": "background_image",
      "label": "t:sections.hero.settings.background_image.label"
    },
    {
      "type": "range",
      "id": "overlay_opacity",
      "default": 40,
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "label": "t:sections.all.overlay_opacity.label"
    },
    {
      "type": "checkbox",
      "id": "overlay_as_gradient",
      "label": "t:sections.all.overlay_as_gradient.label",
      "default": false
    },
    {
      "type": "image_picker",
      "id": "secondary_image",
      "label": "t:sections.hero.settings.secondary_image.label",
      "info": "t:sections.hero.settings.secondary_image.info"
    },
    {
      "type": "range",
      "id": "secondary_image_border_radius",
      "step": 1,
      "default": 16,
      "min": 0,
      "max": 100,
      "unit": "px",
      "label": "t:sections.hero.settings.secondary_image_border_radius.label"
    },
    {
      "type": "range",
      "id": "secondary_image_overlay_opacity",
      "default": 20,
      "min": 0,
      "max": 100,
      "step": 1,
      "unit": "%",
      "label": "t:sections.hero.settings.secondary_image_overlay_opacity.label"
    },
    {
      "type": "header",
      "content": "t:sections.hero.settings.header__heading.content"
    },
    {
      "type": "textarea",
      "id": "section_heading",
      "label": "t:sections.all.heading.label",
      "default": "Some heading"
    },
    {
      "type": "select",
      "id": "section_heading_size",
      "options": [
        {
          "value": "h2",
          "label": "t:sections.all.heading_size.options__2.label"
        },
        {
          "value": "h1",
          "label": "t:sections.all.heading_size.options__3.label"
        },
        {
          "value": "h0",
          "label": "t:sections.all.heading_size.options__8.label"
        }
      ],
      "default": "h0",
      "label": "t:sections.all.heading_size.label"
    },
    {
      "type": "header",
      "content": "t:sections.hero.settings.header__heading__2.content"
    },
    {
      "type": "textarea",
      "id": "section_heading_2",
      "label": "t:sections.all.heading.label",
      "default": "Some secondary heading"
    },
    {
      "type": "select",
      "id": "section_heading_size_2",
      "options": [
        {
          "value": "h4",
          "label": "t:sections.all.heading_size.options__4.label"
        },
        {
          "value": "h3",
          "label": "t:sections.all.heading_size.options__1.label"
        },
        {
          "value": "h2",
          "label": "t:sections.all.heading_size.options__2.label"
        },
        {
          "value": "h1",
          "label": "t:sections.all.heading_size.options__3.label"
        }
      ],
      "default": "h3",
      "label": "t:sections.all.heading_size.label"
    },
    {
      "type": "header",
      "content": "t:sections.hero.settings.header__content.content"
    },
    {
      "type": "header",
      "content": "t:sections.all.button.header_button.content"
    },
    {
      "type": "checkbox",
      "id": "show_button",
      "default": true,
      "label": "t:sections.all.button.button_show.label"
    },
    {
      "type": "text",
      "id": "button_label",
      "default": "Shop now",
      "label": "t:sections.all.button.button_label.label"
    },
    {
      "type": "select",
      "id": "button_style",
      "options": [
        {
          "value": "primary",
          "label": "t:sections.all.button.button_style.options__1.label"
        },
        {
          "value": "secondary",
          "label": "t:sections.all.button.button_style.options__2.label"
        },
        {
          "value": "tertiary",
          "label": "t:sections.all.button.button_style.options__3.label"
        }
      ],
      "default": "primary",
      "label": "t:sections.all.button.button_style.label"
    },
    {
      "type": "url",
      "id": "button_link",
      "label": "t:sections.all.button.button_link.label"
    },
    {
      "type": "checkbox",
      "id": "button_arrow",
      "default": true,
      "label": "t:sections.all.button.button_arrow.label"
    },
    {
      "type": "header",
      "content": "t:sections.all.section-margin.header.content"
    },
    {
      "type": "select",
      "id": "margin_top",
      "options": [
        {
          "value": "no-indent",
          "label": "t:sections.all.section-margin.options__1.label"
        },
        {
          "value": "xs",
          "label": "t:sections.all.section-margin.options__2.label"
        },
        {
          "value": "s",
          "label": "t:sections.all.section-margin.options__3.label"
        },
        {
          "value": "m",
          "label": "t:sections.all.section-margin.options__4.label"
        },
        {
          "value": "l",
          "label": "t:sections.all.section-margin.options__5.label"
        },
        {
          "value": "xl",
          "label": "t:sections.all.section-margin.options__6.label"
        }
      ],
      "default": "no-indent",
      "label": "t:sections.all.section-margin.margin_top.label"
    },
    {
      "type": "select",
      "id": "margin_bottom",
      "options": [
        {
          "value": "no-indent",
          "label": "t:sections.all.section-margin.options__1.label"
        },
        {
          "value": "xs",
          "label": "t:sections.all.section-margin.options__2.label"
        },
        {
          "value": "s",
          "label": "t:sections.all.section-margin.options__3.label"
        },
        {
          "value": "m",
          "label": "t:sections.all.section-margin.options__4.label"
        },
        {
          "value": "l",
          "label": "t:sections.all.section-margin.options__5.label"
        },
        {
          "value": "xl",
          "label": "t:sections.all.section-margin.options__6.label"
        }
      ],
      "default": "no-indent",
      "label": "t:sections.all.section-margin.margin_bottom.label"
    }
  ],
  "presets": [
    {
      "name": "t:sections.hero.name"
    }
  ]
}
{% endschema %}
